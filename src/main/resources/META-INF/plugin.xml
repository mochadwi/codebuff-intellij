<idea-plugin>
    <id>com.codebuff.plugin</id>
    <name>Codebuff</name>
    <vendor>Codebuff</vendor>
    <description>Codebuff is an AI coding assistant that helps developers write, understand, and improve code directly within IntelliJ IDEA.</description>

    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <toolWindow
                id="Codebuff"
                anchor="right"
                factoryClass="com.codebuff.intellij.ui.CodebuffToolWindowFactory"
                icon="/icons/codebuff.svg"/>

        <projectService serviceImplementation="com.codebuff.intellij.services.CodebuffProjectService"/>
        <projectService serviceImplementation="com.codebuff.intellij.services.SessionManager"/>
        <projectService serviceImplementation="com.codebuff.intellij.diff.DiffViewerService"/>

        <applicationConfigurable
                parentId="tools"
                instance="com.codebuff.intellij.settings.CodebuffSettingsConfigurable"
                id="com.codebuff.intellij.settings"
                displayName="Codebuff"/>

        <notificationGroup id="Codebuff" displayType="BALLOON"/>

        <diff.actionProvider order="first" implementation="com.codebuff.intellij.diff.CodebuffDiffActionProvider"/>
    </extensions>

    <actions>
        <action id="Codebuff.OpenToolWindow"
                class="com.codebuff.intellij.actions.OpenToolWindowAction"
                text="Open Codebuff"
                icon="/icons/codebuff.svg">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift C"/>
            <keyboard-shortcut keymap="Mac OS X" first-keystroke="meta shift C"/>
        </action>

        <action id="Codebuff.SendSelection"
                class="com.codebuff.intellij.actions.SendSelectionAction"
                text="Ask Codebuff About Selection">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </action>

        <action id="Codebuff.AcceptDiff"
                class="com.codebuff.intellij.diff.AcceptDiffAction"
                text="Accept Change"
                description="Apply this change">
            <keyboard-shortcut keymap="$default" first-keystroke="ENTER"/>
            <keyboard-shortcut keymap="Mac OS X" first-keystroke="ENTER"/>
        </action>

        <action id="Codebuff.RejectDiff"
                class="com.codebuff.intellij.diff.RejectDiffAction"
                text="Reject Change"
                description="Discard this change">
            <keyboard-shortcut keymap="$default" first-keystroke="ESCAPE"/>
            <keyboard-shortcut keymap="Mac OS X" first-keystroke="ESCAPE"/>
        </action>

        <action id="Codebuff.AcceptAllDiffs"
                class="com.codebuff.intellij.diff.AcceptAllAction"
                text="Accept All Changes"
                description="Apply all changes">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift ENTER"/>
            <keyboard-shortcut keymap="Mac OS X" first-keystroke="meta shift ENTER"/>
        </action>
    </actions>
</idea-plugin>
